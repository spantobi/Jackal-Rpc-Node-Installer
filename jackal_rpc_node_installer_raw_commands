# If you just want to copy/paste the raw commands to create a fully working RPC node you can do that from here:

sudo apt-get install git curl build-essential make jq gcc snapd chrony lz4 tmux unzip bc -y

sudo apt-get update
sudo apt-get upgrade -y
sudo apt-get autoremove -y
sudo apt-get autoclean -y
sudo apt-get remove -y gccgo-go
wget http://golang.org/dl/go1.20.3.linux-amd64.tar.gz && sudo apt-get -y install gcc
sudo tar -C /usr/local -xzf go1.20.3.linux-amd64.tar.gz
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> ~/.bashrc
source $HOME/.bashrc

git clone https://github.com/JackalLabs/canine-chain
cd canine-chain
git checkout v1.2.1
make install

canined init "spantobinode01" --chain-id=jackal-1

curl https://snapshots.nodestake.top/jackal/genesis.json > $HOME/.canine/config/genesis.json

peers=$(curl -s https://snapshots.nodestake.top/jackal/peers.txt)

sed -i.bak -e "s/^persistent_peers *=.*/persistent_peers = \"$peers\"/" ~/.canine/config/config.toml

curl -Ls https://snapshots.nodestake.top/jackal/addrbook.json > $HOME/.canine/config/addrbook.json

sed -i 's/cors_allowed_origins = \[\]/cors_allowed_origins = \["\*"\]/g' ~/.canine/config/config.toml

SNAP_NAME=$(curl -s https://snapshots.nodestake.top/jackal/ | egrep -o ">20.*\.tar.lz4" | tr -d ">")

curl -o - -L https://snapshots.nodestake.top/jackal/${SNAP_NAME} | lz4 -c -d - | tar -x -C $HOME/.canine

sudo tee /etc/systemd/system/canined.service > /dev/null <<EOF
[Unit]
Description=canined daemon
Wants=network-online.target
After=network-online.target
[Service]
User=jackal
ExecStart=/home/jackal/go/bin/canined start
Restart=always
RestartSec=3
LimitNOFILE=65535
[Install]
WantedBy=multi-user.target
EOF

sudo systemctl daemon-reload
sudo systemctl enable canined
sudo systemctl start canined
